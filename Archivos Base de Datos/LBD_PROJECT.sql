/*Proyecto de lenguaje de bases de datos */

--------------------------------------
----Creación de tablas
--------------------------------------
--Pais
CREATE TABLE PAIS_TB(
    ID_PAIS NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY ,
    NOMBRE_PAIS VARCHAR2(30) NOT NULL
);


    INSERT INTO PAIS_TB(ID_PAIS, NOMBRE_PAIS) VALUES(100, 'Costa Rica');
    INSERT INTO PAIS_TB(ID_PAIS, NOMBRE_PAIS) VALUES(101, 'Panama');
    INSERT INTO PAIS_TB(ID_PAIS, NOMBRE_PAIS) VALUES(102, 'Argentina');



CREATE TABLE PROVINCIA_TB(
    ID_PROVINCIA NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE_PROVINCIA VARCHAR2(30) NOT NULL,
    ID_PAIS NUMBER NOT NULL,
    CONSTRAINT fk_pais_provincia FOREIGN KEY(ID_PAIS) REFERENCES PAIS_TB(ID_PAIS)
);

    INSERT INTO PROVINCIA_TB(ID_PROVINCIA, NOMBRE_PROVINCIA, ID_PAIS) VALUES(1000, 'Alajuela', 100);
    INSERT INTO PROVINCIA_TB(ID_PROVINCIA, NOMBRE_PROVINCIA, ID_PAIS) VALUES(1001, 'San Jose', 100);
    INSERT INTO PROVINCIA_TB(ID_PROVINCIA, NOMBRE_PROVINCIA, ID_PAIS) VALUES(1002, 'Guanacaste', 100);





CREATE TABLE CANTON_TB(
    ID_CANTON NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE_CANTON VARCHAR2(30) NOT NULL,
    ID_PROVINCIA NUMBER NOT NULL,
    CONSTRAINT fk_provincia_canton FOREIGN KEY(ID_PROVINCIA) REFERENCES PROVINCIA_TB(ID_PROVINCIA)
);

        INSERT INTO CANTON_TB(ID_CANTON, NOMBRE_CANTON, ID_PROVINCIA) VALUES(2000, 'Grecia', 1000);
    INSERT INTO CANTON_TB(ID_CANTON, NOMBRE_CANTON, ID_PROVINCIA) VALUES(2001, 'Alajuelita', 1001);
    INSERT INTO CANTON_TB(ID_CANTON, NOMBRE_CANTON, ID_PROVINCIA) VALUES(2002, 'Liberia', 1002);




CREATE TABLE DISTRITO_TB(
    ID_DISTRITO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE_DISTRITO VARCHAR2(30) NOT NULL,
    ID_CANTON NUMBER NOT NULL,
    CONSTRAINT fk_canton_distrito FOREIGN KEY(ID_CANTON) REFERENCES CANTON_TB(ID_CANTON)
);


            INSERT INTO DISTRITO_TB(ID_DISTRITO, NOMBRE_DISTRITO, ID_CANTON) VALUES(3000, 'Grecia', 2000);
    INSERT INTO DISTRITO_TB(ID_DISTRITO, NOMBRE_DISTRITO, ID_CANTON) VALUES(3001, 'Concepci?n', 2001);
    INSERT INTO DISTRITO_TB(ID_DISTRITO, NOMBRE_DISTRITO, ID_CANTON) VALUES(3002, 'Ca?as Dulces', 2002);

CREATE TABLE DETALLE_DIRECCION_TB(
    ID_DETALLE_DIRECCION NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DETALLE_DIRECCION VARCHAR2(30) NOT NULL,
    ID_DISTRITO NUMBER NOT NULL,
    CODIGO_POSTAL VARCHAR2(5) NOT NULL,
    CONSTRAINT fk_distrito_direccion FOREIGN KEY(ID_DISTRITO) REFERENCES DISTRITO_TB(ID_DISTRITO)
);

 INSERT INTO DETALLE_DIRECCION_TB(ID_DETALLE_DIRECCION, DETALLE_DIRECCION, ID_DISTRITO, CODIGO_POSTAL) VALUES(4000, 'Avenida 1, Casa #123', 3000, '10101');
    INSERT INTO DETALLE_DIRECCION_TB(ID_DETALLE_DIRECCION, DETALLE_DIRECCION, ID_DISTRITO, CODIGO_POSTAL) VALUES(4001, 'Calle 2, Edificio #456', 3001, '10202');
    INSERT INTO DETALLE_DIRECCION_TB(ID_DETALLE_DIRECCION, DETALLE_DIRECCION, ID_DISTRITO, CODIGO_POSTAL) VALUES(4002, 'Apartado Postal #789', 3002, '10303');


--Cliente
CREATE TABLE CLIENTE_TB(
    ID_CLIENTE NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE_CLIENTE VARCHAR2(30) NOT NULL,
    PRIMER_APELLIDO VARCHAR2(30) NOT NULL ,
    SEGUNDO_APELLIDO VARCHAR2(30) NOT NULL,
    NUMERO_CEDULA NUMBER NOT NULL,
    EDAD NUMBER NOT NULL,
    GENERO VARCHAR2(20),
    ID_DIRECCION NUMBER NOT NULL,
    CONSTRAINT fk_direccion_cliente FOREIGN KEY (ID_DIRECCION) REFERENCES DETALLE_DIRECCION_TB(ID_DETALLE_DIRECCION)
);


  INSERT INTO CLIENTE_TB(ID_CLIENTE, NOMBRE_CLIENTE, PRIMER_APELLIDO, SEGUNDO_APELLIDO, NUMERO_CEDULA, EDAD, GENERO, ID_DIRECCION) VALUES(5000, 'Juan', 'Perez', 'Gonzalez', 123456789, 35, 'Masculino', 4000);
    INSERT INTO CLIENTE_TB(ID_CLIENTE, NOMBRE_CLIENTE, PRIMER_APELLIDO, SEGUNDO_APELLIDO, NUMERO_CEDULA, EDAD, GENERO, ID_DIRECCION) VALUES(5001, 'Maria', 'Lopez', 'Gomez', 987654321, 28, 'Femenino', 4001);
    INSERT INTO CLIENTE_TB(ID_CLIENTE, NOMBRE_CLIENTE, PRIMER_APELLIDO, SEGUNDO_APELLIDO, NUMERO_CEDULA, EDAD, GENERO, ID_DIRECCION) VALUES(5002, 'Carlos', 'Martinez', 'Rodriguez', 456123789, 45, 'Masculino', 4002);




CREATE TABLE TELEFONO_CLIENTE_TB(
    ID_TELEFONO_CLIENTE NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NUMERO_TELEFONO NUMBER NOT NULL,
    ID_CLIENTE NUMBER NOT NULL,
    CONSTRAINT fk_cliente_telefono FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE_TB(ID_CLIENTE)
);

    INSERT INTO TELEFONO_CLIENTE_TB(ID_TELEFONO_CLIENTE, NUMERO_TELEFONO, ID_CLIENTE) VALUES(6000, 23412232, 5000);
    INSERT INTO TELEFONO_CLIENTE_TB(ID_TELEFONO_CLIENTE, NUMERO_TELEFONO, ID_CLIENTE) VALUES(6001, 87654321, 5001);
    INSERT INTO TELEFONO_CLIENTE_TB(ID_TELEFONO_CLIENTE, NUMERO_TELEFONO, ID_CLIENTE) VALUES(6002, 45678912, 5002);

CREATE TABLE EMAIL_CLIENTE_TB(
    ID_EMAIL_CLIENTE  NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EMAIL VARCHAR2(50) NOT NULL,
    ID_CLIENTE NUMERIC NOT NULL,
    CONSTRAINT fk_cliente_email FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE_TB(ID_CLIENTE)
);
    INSERT INTO EMAIL_CLIENTE_TB(ID_EMAIL_CLIENTE, EMAIL, ID_CLIENTE) VALUES(7000, 'juan@example.com', 5000);
    INSERT INTO EMAIL_CLIENTE_TB(ID_EMAIL_CLIENTE, EMAIL, ID_CLIENTE) VALUES(7001, 'maria@example.com', 5001);
    INSERT INTO EMAIL_CLIENTE_TB(ID_EMAIL_CLIENTE, EMAIL, ID_CLIENTE) VALUES(7002, 'carlos@example.com', 5002);

--empleado
CREATE TABLE PUESTO_TB(
    ID_PUESTO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE_PUESTO VARCHAR2(30),
    SALARIO NUMBER NOT NULL
);

    INSERT INTO PUESTO_TB(ID_PUESTO, NOMBRE_PUESTO, SALARIO) VALUES(8000, 'Gerente', 5000);
    INSERT INTO PUESTO_TB(ID_PUESTO, NOMBRE_PUESTO, SALARIO) VALUES(8001, 'Vendedor', 3000);
    INSERT INTO PUESTO_TB(ID_PUESTO, NOMBRE_PUESTO, SALARIO) VALUES(8002, 'Contador', 4000);

CREATE TABLE EMPLEADO_TB(
    ID_EMPLEADO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE_EMPLEADO VARCHAR2(30) NOT NULL,
    PRIMER_APELLIDO VARCHAR2(30) NOT NULL ,
    SEGUNDO_APELLIDO VARCHAR2(30) NOT NULL,
    NUMERO_CEDULA NUMBER NOT NULL,
    EDAD NUMBER NOT NULL,
    GENERO VARCHAR2(20),
    ID_DIRECCION NUMBER NOT NULL,
    FECHA_CONTRATACION DATE NOT NULL,
    ID_PUESTO NUMBER NOT NULL,
    CONSTRAINT fk_direccion_empleado FOREIGN KEY (ID_DIRECCION) REFERENCES DETALLE_DIRECCION_TB(ID_DETALLE_DIRECCION),
    CONSTRAINT fk_puesto_empleado FOREIGN KEY (ID_PUESTO) REFERENCES PUESTO_TB(ID_PUESTO)
);


    INSERT INTO EMPLEADO_TB(ID_EMPLEADO, NOMBRE_EMPLEADO, PRIMER_APELLIDO, SEGUNDO_APELLIDO, NUMERO_CEDULA, EDAD, GENERO, ID_DIRECCION, FECHA_CONTRATACION, ID_PUESTO) VALUES(9000, 'Pedro', 'Sanchez', 'Gutierrez', 987654321, 40, 'Masculino', 4000, TO_DATE('2024-01-15', 'YYYY-MM-DD'), 8000);
    INSERT INTO EMPLEADO_TB(ID_EMPLEADO, NOMBRE_EMPLEADO, PRIMER_APELLIDO, SEGUNDO_APELLIDO, NUMERO_CEDULA, EDAD, GENERO, ID_DIRECCION, FECHA_CONTRATACION, ID_PUESTO) VALUES(9001, 'Laura', 'Gomez', 'Rodriguez', 123456789, 30, 'Femenino', 4001, TO_DATE('2024-02-20', 'YYYY-MM-DD'), 8001);
    INSERT INTO EMPLEADO_TB(ID_EMPLEADO, NOMBRE_EMPLEADO, PRIMER_APELLIDO, SEGUNDO_APELLIDO, NUMERO_CEDULA, EDAD, GENERO, ID_DIRECCION, FECHA_CONTRATACION, ID_PUESTO) VALUES(9002, 'Daniel', 'Martinez', 'Lopez', 456123789, 35, 'Masculino', 4002, TO_DATE('2024-03-10', 'YYYY-MM-DD'), 8002);


CREATE TABLE TELEFONO_EMPLEADO_TB(
    ID_TELEFONO_EMPLEADO  NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NUMERO_TELEFONO number NOT NULL,
    ID_EMPLEADO number NOT NULL,
    CONSTRAINT fk_empleado_telefono FOREIGN KEY (ID_EMPLEADO) REFERENCES EMPLEADO_TB(ID_EMPLEADO)
);

    INSERT INTO TELEFONO_EMPLEADO_TB(ID_TELEFONO_EMPLEADO, NUMERO_TELEFONO, ID_EMPLEADO) VALUES(10000, 11111111, 9000);
    INSERT INTO TELEFONO_EMPLEADO_TB(ID_TELEFONO_EMPLEADO, NUMERO_TELEFONO, ID_EMPLEADO) VALUES(10001, 22222222, 9001);
    INSERT INTO TELEFONO_EMPLEADO_TB(ID_TELEFONO_EMPLEADO, NUMERO_TELEFONO, ID_EMPLEADO) VALUES(10002, 33333333, 9002);


CREATE TABLE EMAIL_EMPLEADO_TB(
    ID_EMAIL_EMPLEADO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EMAIL VARCHAR2(50) NOT NULL,
    ID_EMPLEADO NUMERIC NOT NULL,
    CONSTRAINT fk_empleado_email FOREIGN KEY (ID_EMPLEADO) REFERENCES EMPLEADO_TB(ID_EMPLEADO)
);

    INSERT INTO EMAIL_EMPLEADO_TB(ID_EMAIL_EMPLEADO, EMAIL, ID_EMPLEADO) VALUES(11000, 'pedro@example.com', 9000);
    INSERT INTO EMAIL_EMPLEADO_TB(ID_EMAIL_EMPLEADO, EMAIL, ID_EMPLEADO) VALUES(11001, 'laura@example.com', 9001);
    INSERT INTO EMAIL_EMPLEADO_TB(ID_EMAIL_EMPLEADO, EMAIL, ID_EMPLEADO) VALUES(11002, 'daniel@example.com', 9002);

-----Proveedor

CREATE TABLE PROVEEDOR_TB(
    ID_PROVEEDOR NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE_EMPRESA VARCHAR2(40) NOT NULL,
    PERSONA_CONTACTO VARCHAR2(50) NOT NULL,
    TIPO_PROVEEDOR VARCHAR2(50),
    ID_DIRECCION number NOT NULL,
    CONSTRAINT fk_direccion_proveedor FOREIGN KEY(ID_DIRECCION) REFERENCES DETALLE_DIRECCION_TB(ID_DETALLE_DIRECCION)
    );

    INSERT INTO PROVEEDOR_TB(ID_PROVEEDOR, NOMBRE_EMPRESA, PERSONA_CONTACTO, TIPO_PROVEEDOR, ID_DIRECCION) VALUES(12000, 'Proveedores SA', 'Pedro Rodriguez', 'Tecnolog?a', 4000);
    INSERT INTO PROVEEDOR_TB(ID_PROVEEDOR, NOMBRE_EMPRESA, PERSONA_CONTACTO, TIPO_PROVEEDOR, ID_DIRECCION) VALUES(12001, 'Distribuidora XYZ', 'Laura Perez', 'Alimentos', 4001);
    INSERT INTO PROVEEDOR_TB(ID_PROVEEDOR, NOMBRE_EMPRESA, PERSONA_CONTACTO, TIPO_PROVEEDOR, ID_DIRECCION) VALUES(12002, 'Importadora ABC', 'Daniel Gomez', 'Ropa', 4002);


CREATE TABLE TELEFONO_PROVEEDOR_TB(
    ID_TELEFONO_PROVEEDOR NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NUMERO_TELEFONO number NOT NULL,
    ID_PROVEEDOR number NOT NULL,
    CONSTRAINT fk_proveedor_telefono FOREIGN KEY (ID_PROVEEDOR) REFERENCES PROVEEDOR_TB(ID_PROVEEDOR)
);

    INSERT INTO TELEFONO_PROVEEDOR_TB(ID_TELEFONO_PROVEEDOR, NUMERO_TELEFONO, ID_PROVEEDOR) VALUES(13000, 44444444, 12000);
    INSERT INTO TELEFONO_PROVEEDOR_TB(ID_TELEFONO_PROVEEDOR, NUMERO_TELEFONO, ID_PROVEEDOR) VALUES(13001, 55555555, 12001);
    INSERT INTO TELEFONO_PROVEEDOR_TB(ID_TELEFONO_PROVEEDOR, NUMERO_TELEFONO, ID_PROVEEDOR) VALUES(13002, 66666666, 12002);


CREATE TABLE EMAIL_PROVEEDOR_TB(
    ID_EMAIL_PROVEEDOR NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    EMAIL VARCHAR2(50) NOT NULL,
    ID_PROVEEDOR number NOT NULL,
    CONSTRAINT fk_proveedor_email FOREIGN KEY (ID_PROVEEDOR) REFERENCES PROVEEDOR_TB(ID_PROVEEDOR)
);

    INSERT INTO EMAIL_PROVEEDOR_TB(ID_EMAIL_PROVEEDOR, EMAIL, ID_PROVEEDOR) VALUES(14000, 'info@proveedores.com', 12000);
    INSERT INTO EMAIL_PROVEEDOR_TB(ID_EMAIL_PROVEEDOR, EMAIL, ID_PROVEEDOR) VALUES(14001, 'contacto@distribuidoraxyz.com', 12001);
    INSERT INTO EMAIL_PROVEEDOR_TB(ID_EMAIL_PROVEEDOR, EMAIL, ID_PROVEEDOR) VALUES(14002, 'ventas@importadoraabc.com', 12002);



----------------Tablas para el apartado de productos y funcionamiento del inventario

CREATE TABLE CATEGORIA_PRODUCTOS_TB(
    ID_CATEGORIA_PRODUCTOS  NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE_CATEGORIA VARCHAR2(40) NOT NULL,
    DESCRIPCION_CATEGORIA VARCHAR2(150) NOT NULL,
    ACTIVO NUMBER(1,0)
    );
    
    INSERT INTO CATEGORIA_PRODUCTOS_TB(ID_CATEGORIA_PRODUCTOS, NOMBRE_CATEGORIA, DESCRIPCION_CATEGORIA, ACTIVO) VALUES(15000, 'Winchers', 'Herrienta utilizada para sacar vehiculos atascados', 1);
INSERT INTO CATEGORIA_PRODUCTOS_TB(ID_CATEGORIA_PRODUCTOS, NOMBRE_CATEGORIA, DESCRIPCION_CATEGORIA, ACTIVO) VALUES(15001, 'Overlanding', 'Tiendas de acampar que se instalan en cualquier vehículo', 1);
INSERT INTO CATEGORIA_PRODUCTOS_TB(ID_CATEGORIA_PRODUCTOS, NOMBRE_CATEGORIA, DESCRIPCION_CATEGORIA, ACTIVO) VALUES(15002, 'Snorkels','Respiraderos elevados para los vehículos', 1);
    
    
CREATE TABLE PRODUCTO_TB(
    ID_PRODUCTO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE_PRODUCTO VARCHAR2(40) NOT NULL,
    DESCRIPCION_PRODUCTO VARCHAR2(150) NOT NULL,
    PRECIO NUMBER NOT NULL,
    ID_CATEGORIA NUMBER NOT NULL,
    CONSTRAINT fk_categoria_producto FOREIGN KEY (ID_CATEGORIA) REFERENCES CATEGORIA_PRODUCTOS_TB(ID_CATEGORIA_PRODUCTOS)
    );
    INSERT INTO PRODUCTO_TB(ID_PRODUCTO, NOMBRE_PRODUCTO, DESCRIPCION_PRODUCTO, PRECIO, ID_CATEGORIA) VALUES(16000, 'Snorkel Kobata', 'Respiradero para automoviles', 25, 15000);
INSERT INTO PRODUCTO_TB(ID_PRODUCTO, NOMBRE_PRODUCTO, DESCRIPCION_PRODUCTO, PRECIO, ID_CATEGORIA) VALUES(16001, 'Wincher Unity', 'Wincher de calidad Unitiy', 50, 15001);
INSERT INTO PRODUCTO_TB(ID_PRODUCTO, NOMBRE_PRODUCTO, DESCRIPCION_PRODUCTO, PRECIO, ID_CATEGORIA) VALUES(16002, 'Overlanding Kobata', 'Tienda de acampar kobata', 5, 15002);

    
    
CREATE TABLE INVENTARIO_TB(
    ID_INVENTARIO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ID_PRODUCTO number NOT NULL,
    CANTIDAD_PRODUCTO NUMBER NOT NULL,
    FECHA_ACTUALIZACION DATE,
    DISPONIBLE NUMBER(1,0),
    CONSTRAINT fk_producto_inventario FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTO_TB(ID_PRODUCTO)
    );
    
        INSERT INTO INVENTARIO_TB(ID_INVENTARIO, ID_PRODUCTO, CANTIDAD_PRODUCTO, FECHA_ACTUALIZACION, DISPONIBLE) VALUES(17000, 16000, 50, SYSDATE, 7);
    INSERT INTO INVENTARIO_TB(ID_INVENTARIO, ID_PRODUCTO, CANTIDAD_PRODUCTO, FECHA_ACTUALIZACION, DISPONIBLE) VALUES(17001, 16001, 100, SYSDATE, 4);
    INSERT INTO INVENTARIO_TB(ID_INVENTARIO, ID_PRODUCTO, CANTIDAD_PRODUCTO, FECHA_ACTUALIZACION, DISPONIBLE) VALUES(17002, 16002, 20, SYSDATE, 9);



    
CREATE TABLE DESCUENTO_PROMOCION_TB(
    ID_DESCUENTO_PROMOCION NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ID_PRODUCTO number NOT NULL,
    TIPO VARCHAR2(50) NOT NULL,
    DETALLES VARCHAR2(100),
    FECHA_INICIO DATE,
    FECHA_FIN DATE,
    CONSTRAINT fk_producto_desc FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTO_TB(ID_PRODUCTO)
    );
    
        INSERT INTO DESCUENTO_PROMOCION_TB(ID_DESCUENTO_PROMOCION, ID_PRODUCTO, TIPO, DETALLES, FECHA_INICIO, FECHA_FIN) VALUES(19000, 16000, 'Descuento', 'Oferta especial por tiempo limitado', SYSDATE, TO_DATE('2024-12-31', 'YYYY-MM-DD'));
    INSERT INTO DESCUENTO_PROMOCION_TB(ID_DESCUENTO_PROMOCION, ID_PRODUCTO, TIPO, DETALLES, FECHA_INICIO, FECHA_FIN) VALUES(19001, 16001, 'Promoci?n', '2x1 en productos seleccionados', SYSDATE, TO_DATE('2024-06-30', 'YYYY-MM-DD'));
    INSERT INTO DESCUENTO_PROMOCION_TB(ID_DESCUENTO_PROMOCION, ID_PRODUCTO, TIPO, DETALLES, FECHA_INICIO, FECHA_FIN) VALUES(19002, 16002, 'Descuento', 'Descuento del 10% para miembros VIP', SYSDATE, TO_DATE('2024-08-31', 'YYYY-MM-DD'));



-----------ORDENES PROVEEDOR

CREATE  TABLE ORDEN_PROVEEDOR_TB(
    ID_ORDEN_PROVEEDOR NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ID_PROVEEDOR number NOT NULL,
    DETALLES VARCHAR2(100),
    FECHA_PEDIDO DATE NOT NULL,
    FECHA_ESTIMADA_FIN DATE NOT NULL,
    CONSTRAINT fk_proveedor_ordenProveedor FOREIGN KEY (ID_PROVEEDOR) REFERENCES PROVEEDOR_TB(ID_PROVEEDOR)
    );
    
        INSERT INTO ORDEN_PROVEEDOR_TB( ID_PROVEEDOR, DETALLES, FECHA_PEDIDO, FECHA_ESTIMADA_FIN) VALUES( 12000, 'Compra de winchers', SYSDATE, TO_DATE('2024-04-10', 'YYYY-MM-DD'));
    INSERT INTO ORDEN_PROVEEDOR_TB( ID_PROVEEDOR, DETALLES, FECHA_PEDIDO, FECHA_ESTIMADA_FIN) VALUES( 12001, 'Compra de snorkels', SYSDATE, TO_DATE('2024-04-15', 'YYYY-MM-DD'));
    INSERT INTO ORDEN_PROVEEDOR_TB( ID_PROVEEDOR, DETALLES, FECHA_PEDIDO, FECHA_ESTIMADA_FIN) VALUES( 12002, 'Compra de overlanding', SYSDATE, TO_DATE('2024-04-20', 'YYYY-MM-DD'));


    
CREATE TABLE DETALLE_ORDEN_PROVEEDOR_TB(
    ID_DETALLE_ORDEN NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ID_ORDEN_PROVEEDOR number NOT NULL,
    ID_PRODUCTO number NOT NULL,
    CANTIDAD NUMBER,
    CONSTRAINT fk_ordenProveedor_detalleOrden FOREIGN KEY (ID_ORDEN_PROVEEDOR) REFERENCES ORDEN_PROVEEDOR_TB(ID_ORDEN_PROVEEDOR),
    CONSTRAINT fk_ordenProveedor_producto FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTO_TB(ID_PRODUCTO)
);

    INSERT INTO DETALLE_ORDEN_PROVEEDOR_TB(ID_DETALLE_ORDEN, ID_ORDEN_PROVEEDOR, ID_PRODUCTO, CANTIDAD) VALUES(21000, 1, 16000, 20);
    INSERT INTO DETALLE_ORDEN_PROVEEDOR_TB(ID_DETALLE_ORDEN, ID_ORDEN_PROVEEDOR, ID_PRODUCTO, CANTIDAD) VALUES(20000, 2, 16001, 50);
    INSERT INTO DETALLE_ORDEN_PROVEEDOR_TB(ID_DETALLE_ORDEN, ID_ORDEN_PROVEEDOR, ID_PRODUCTO, CANTIDAD) VALUES(21002, 3, 16002, 10);

--------METODO PAGO
CREATE TABLE METODO_PAGO_TB(
    ID_METODO_PAGO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NOMBRE_METODO_PAGO VARCHAR(50) NOT NULL,
    ACTIVO NUMBER(1,0) default 1,
    DETALLES VARCHAR2(100)
    );

        INSERT INTO METODO_PAGO_TB (ID_METODO_PAGO, NOMBRE_METODO_PAGO, ACTIVO, DETALLES) VALUES (22000, 'Efectivo', 1, 'Pago en efectivo al momento de la entrega');
    INSERT INTO METODO_PAGO_TB (ID_METODO_PAGO, NOMBRE_METODO_PAGO, ACTIVO, DETALLES) VALUES (22001, 'Tarjeta de credito', 0, 'Pago con tarjeta de cr?dito en lInea');
    INSERT INTO METODO_PAGO_TB (ID_METODO_PAGO, NOMBRE_METODO_PAGO, ACTIVO, DETALLES) VALUES (22002, 'Transferencia bancaria', 1, 'Pago mediante transferencia bancaria');

/*Comentarios*/
COMMENT ON COLUMN Metodo_Pago_tb.ID_METODO_PAGO IS 'Llave primaria de la tabla';
COMMENT ON COLUMN Metodo_Pago_tb.NOMBRE_METODO_PAGO IS 'El tipo de metodo de pago: efectivo, tarjeta, transaccion,sinpe';
COMMENT ON COLUMN Metodo_Pago_tb.Activo IS 'Indica si el método de pago está activo (Sí(1)/N0(0))';
COMMENT ON COLUMN Metodo_Pago_tb.DETALLES IS 'Detalles del metodo de pago como el nombre del banco, en colones, dolares';




----------FACTURACION

CREATE TABLE FACTURA_TB(
    ID_FACTURA NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ID_CLIENTE NUMBER ,
    ID_EMPLEADO NUMBER ,
    ID_METODO_PAGO NUMBER ,
    DETALLES VARCHAR2(100),
    ESTADO VARCHAR2(20),
    FECHA_FACTURACION DATE,
    TOTAL NUMBER NOT NULL,
    CONSTRAINT fk_cliente_factura FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE_TB(ID_CLIENTE),
    CONSTRAINT fk_empleado_factura FOREIGN KEY (ID_EMPLEADO) REFERENCES EMPLEADO_TB(ID_EMPLEADO),
    CONSTRAINT fk_metodoPago_factura FOREIGN KEY (ID_METODO_PAGO) REFERENCES METODO_PAGO_TB(ID_METODO_PAGO)
    );

    INSERT INTO FACTURA_TB (ID_FACTURA, ID_CLIENTE, ID_EMPLEADO, ID_METODO_PAGO, DETALLES, ESTADO, FECHA_FACTURACION, TOTAL) VALUES (23000, 5000, 9000, 22000, 'Venta de productos electr?nicos', 'Pagada', TO_DATE('2024-04-01', 'YYYY-MM-DD'), 500);
    INSERT INTO FACTURA_TB (ID_FACTURA, ID_CLIENTE, ID_EMPLEADO, ID_METODO_PAGO, DETALLES, ESTADO, FECHA_FACTURACION, TOTAL) VALUES (23001, 5001, 9001, 22001, 'Venta de comestibles', 'Pagada',  TO_DATE('2024-04-02', 'YYYY-MM-DD'), 750);
    INSERT INTO FACTURA_TB (ID_FACTURA, ID_CLIENTE, ID_EMPLEADO, ID_METODO_PAGO, DETALLES, ESTADO, FECHA_FACTURACION,  TOTAL) VALUES (23002, 5002, 9002, 22002, 'Venta de ropa', 'Pagada',  TO_DATE('2024-04-03', 'YYYY-MM-DD'), 300);



CREATE TABLE DETALLE_FACTURA_TB(
    ID_DETALLE_FACTURA NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ID_FACTURA NUMBER NOT NULL,
    ID_PRODUCTO NUMBER NOT NULL,
    CANTIDAD_PRODUCTOS NUMBER NOT NULL,
    PRECIO_FILA VARCHAR2(100),
    CONSTRAINT fk_factura_detalleFactura FOREIGN KEY (ID_FACTURA) REFERENCES FACTURA_TB(ID_FACTURA),
    CONSTRAINT fk_producto_detalleFactura FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTO_TB(ID_PRODUCTO)
    );
    
        INSERT INTO DETALLE_FACTURA_TB (ID_DETALLE_FACTURA, ID_FACTURA, ID_PRODUCTO, CANTIDAD_PRODUCTOS, PRECIO_FILA) VALUES (24000, 23000, 16000, 22, '250');
    INSERT INTO DETALLE_FACTURA_TB (ID_DETALLE_FACTURA, ID_FACTURA, ID_PRODUCTO, CANTIDAD_PRODUCTOS, PRECIO_FILA) VALUES (24001, 23001, 16001, 5, '250');
    INSERT INTO DETALLE_FACTURA_TB (ID_DETALLE_FACTURA, ID_FACTURA, ID_PRODUCTO, CANTIDAD_PRODUCTOS, PRECIO_FILA) VALUES (24002, 23002, 16002, 9, '100');

    
CREATE TABLE historial_ventas (
    id_venta NUMBER GENERATED BY DEFAULT AS IDENTITY MINVALUE 1 MAXVALUE 9999999999999999999999999999 INCREMENT BY 1 START WITH 1 CACHE 20 NOORDER NOCYCLE NOT NULL ENABLE,
    id_factura NUMBER,
    fecha_venta DATE,
    total_venta NUMBER,
    CONSTRAINT fk_factura FOREIGN KEY (id_factura) REFERENCES factura_tb (id_factura)
);


    INSERT INTO historial_ventas (id_factura, fecha_venta, total_venta) VALUES (23000, TO_DATE('2024-04-01', 'YYYY-MM-DD'), 500);
    INSERT INTO historial_ventas (id_factura, fecha_venta, total_venta) VALUES (23001, TO_DATE('2024-04-02', 'YYYY-MM-DD'), 750);
    INSERT INTO historial_ventas (id_factura, fecha_venta, total_venta) VALUES (23002, TO_DATE('2024-04-03', 'YYYY-MM-DD'), 300);

--------PEDIDOS CLIENTE

CREATE TABLE PEDIDO_CLIENTE_TB(
    ID_PEDIDO_CLIENTE NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ID_FACTURA number NOT NULL,
    ID_DIRECCION number NOT NULL,    
    ID_CLIENTE number NOT NULL,
    ESTADO_PEDIDO VARCHAR2(100),
    CONSTRAINT fk_factura_pedidoCliente FOREIGN KEY (ID_FACTURA) REFERENCES FACTURA_TB(ID_FACTURA),
    CONSTRAINT fk_direccion_pedidoCliente FOREIGN KEY (ID_DIRECCION) REFERENCES DETALLE_DIRECCION_TB(ID_DETALLE_DIRECCION),
    CONSTRAINT fk_cliente_pedidoCliente FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE_TB(ID_CLIENTE)
    );

    INSERT INTO PEDIDO_CLIENTE_TB (ID_PEDIDO_CLIENTE, ID_FACTURA, ID_DIRECCION, ID_CLIENTE, ESTADO_PEDIDO) VALUES (25000, 23000, 4000, 5000, 'En proceso');
    INSERT INTO PEDIDO_CLIENTE_TB (ID_PEDIDO_CLIENTE, ID_FACTURA, ID_DIRECCION, ID_CLIENTE, ESTADO_PEDIDO) VALUES (25001, 23001, 4001, 5001, 'Entregado');
    INSERT INTO PEDIDO_CLIENTE_TB (ID_PEDIDO_CLIENTE, ID_FACTURA, ID_DIRECCION, ID_CLIENTE, ESTADO_PEDIDO) VALUES (25002, 23002, 4002, 5002, 'En espera');


--------Transacciones

CREATE TABLE TRANSACCION_DEVOLUCION(
    ID_TRANSACCION_DEVOLUCION NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ID_FACTURA NUMBER NOT NULL,
    ID_CLIENTE NUMBER NOT NULL,
    CANTIDAD_DEVUELTA NUMBER NOT NULL,
    FECHA_DEVOLUCION DATE NOT NULL,
    MOTIVO_DEVOLUCION VARCHAR2(200) NOT NULL,
    DETALLES VARCHAR2(150) NOT NULL,
    CONSTRAINT fk_factura_transaccionDev FOREIGN KEY (ID_FACTURA) REFERENCES FACTURA_TB(ID_FACTURA),
    CONSTRAINT fk_cliente_transaccionDev FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE_TB(ID_CLIENTE)
);
    
    INSERT INTO TRANSACCION_DEVOLUCION (ID_TRANSACCION_DEVOLUCION, ID_FACTURA, ID_CLIENTE, CANTIDAD_DEVUELTA, FECHA_DEVOLUCION, MOTIVO_DEVOLUCION, DETALLES) VALUES (26000, 23000, 5000, 4, TO_DATE('2024-04-03', 'YYYY-MM-DD'), 'Producto defectuoso', 'Devoluci?n parcial');
    INSERT INTO TRANSACCION_DEVOLUCION (ID_TRANSACCION_DEVOLUCION, ID_FACTURA, ID_CLIENTE, CANTIDAD_DEVUELTA, FECHA_DEVOLUCION, MOTIVO_DEVOLUCION, DETALLES) VALUES (26001, 23001, 5001, 2, TO_DATE('2024-04-04', 'YYYY-MM-DD'), 'Talla incorrecta', 'Devoluci?n parcial');
    INSERT INTO TRANSACCION_DEVOLUCION (ID_TRANSACCION_DEVOLUCION, ID_FACTURA, ID_CLIENTE, CANTIDAD_DEVUELTA, FECHA_DEVOLUCION, MOTIVO_DEVOLUCION, DETALLES) VALUES (26002, 23002, 5002, 3, TO_DATE('2024-04-05', 'YYYY-MM-DD'), 'Producto da?ado', 'Devoluci?n completa');



CREATE TABLE TRANSACCION_COMPRA(
    ID_TRANSACCION_COMPRA NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ID_ORDEN NUMBER NOT NULL,
    ID_METODO_PAGO NUMBER NOT NULL,
    FECHA_TRANSACCION DATE NOT NULL,
    DETALLES VARCHAR2(150) NOT NULL,
    CONSTRAINT fk_orden_transaccionCompra FOREIGN KEY (ID_ORDEN) REFERENCES ORDEN_PROVEEDOR_TB(ID_ORDEN_PROVEEDOR),
    CONSTRAINT fk_metodoPago_transaccionCompra FOREIGN KEY (ID_METODO_PAGO) REFERENCES METODO_PAGO_TB(ID_METODO_PAGO)
);

 INSERT INTO TRANSACCION_COMPRA (ID_TRANSACCION_COMPRA, ID_ORDEN, ID_METODO_PAGO, FECHA_TRANSACCION, DETALLES) VALUES (27000, 20000, 22000, TO_DATE('2024-04-01', 'YYYY-MM-DD'), 'Compra de smartphones');
    INSERT INTO TRANSACCION_COMPRA (ID_TRANSACCION_COMPRA, ID_ORDEN, ID_METODO_PAGO, FECHA_TRANSACCION, DETALLES) VALUES (27001, 20001, 22001, TO_DATE('2024-04-02', 'YYYY-MM-DD'), 'Compra de arroz');
    INSERT INTO TRANSACCION_COMPRA (ID_TRANSACCION_COMPRA, ID_ORDEN, ID_METODO_PAGO, FECHA_TRANSACCION, DETALLES) VALUES (27002, 20002, 22002, TO_DATE('2024-04-03', 'YYYY-MM-DD'), 'Compra de camisas');




---------------------------------------------------------------------------------------------------------------------------
-------Auditoria

CREATE TABLE AUDITORIA_INVENTARIO_TB (
    ID_AUDI_INVENTARIO NUMBER NOT NULL PRIMARY KEY,
    ACCION VARCHAR2(10),
    ID_PRODUCTO NUMERIC NOT NULL,
    CANTIDAD_ANTERIOR NUMBER ,
    CANTIDAD_ACTUAL NUMBER ,
    FECHA_ACCION DATE,
    CONSTRAINT fk_producto_auditoria FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTO_TB(ID_PRODUCTO)
);
    
    
CREATE TABLE audit_actualizacion_pedidos_clientes (
    id_registro NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    fecha_hora TIMESTAMP,
    usuario VARCHAR(100),
    comentario VARCHAR(1000)
);


CREATE TABLE AUDIT_REGISTRO_PEDIDOS_CLIENTES (
    ID_AUDITORIA_PEDIDO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    MENSAJE VARCHAR2(4000),
    FECHA_REGISTRO DATE
);

CREATE TABLE AUDITORIA_PEDIDO_CLIENTES(
    ID_AUDITORIA_PEDIDO NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    ID_PEDIDO_CLIENTE NUMERIC NOT NULL,
    ID_CLIENTE NUMERIC NOT NULL,
    CUMPLIMIENTO_PEDIDO VARCHAR2(100),
    FECHA_AUDITORIA DATE,
    CONSTRAINT fk_cliente_auditoria FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE_TB(ID_CLIENTE),
    CONSTRAINT fk_pedido_cliente_auditoria FOREIGN KEY (ID_PEDIDO_CLIENTE) REFERENCES PEDIDO_CLIENTE_TB(ID_PEDIDO_CLIENTE)
);

    INSERT INTO AUDITORIA_PEDIDO_CLIENTES (ID_AUDITORIA_PEDIDO, ID_PEDIDO_CLIENTE, ID_CLIENTE, CUMPLIMIENTO_PEDIDO, FECHA_AUDITORIA)
    SELECT 28000, 25000, 5000, 'Lospedidos se entregaron tarde', TO_DATE('2024-04-10', 'YYYY-MM-DD') FROM DUAL UNION ALL
    SELECT 28001, 25001, 5001, 'Los pedidos se entregaron a tiempo', TO_DATE('2024-03-10', 'YYYY-MM-DD') FROM DUAL UNION ALL
    SELECT 28002, 25002, 5002, 'Algunos pedidos no se pudieron entregar', TO_DATE('2024-02-10', 'YYYY-MM-DD') FROM DUAL;
    SELECT 28003, 25002, 5002, 'Algunos pedidos no se pudieron entregar', TO_DATE('2024-02-10', 'YYYY-MM-DD') FROM DUAL;
   
SELECT * FROM AUDITORIA_PEDIDO_CLIENTES

